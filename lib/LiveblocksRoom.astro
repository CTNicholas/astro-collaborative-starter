---
import './liveblocks-room'

export interface Props {
  'user-name'?: string;
  'user-color'?: string;
  'user-picture'?: string;
  'user-status'?: string;
  'room-id': string;
  'public-key': string;
}

const {
  'user-name': name,
  'user-color': color,
  'user-picture': picture,
  'user-status': status,
  'room-id': id,
  'public-key': key
} = Astro.props
---

<script>
  if (typeof window !== 'undefined') {
    window.LiveblocksRoom = {
      _tempUser: {},
      _tempRoom: '',
      setUser (info) {
        this._tempUser = info
      },
      setRoom (id) {
        this._tempRoom = id
      }
    }
  }
</script>

<liveblocks-room
  user-name={name}
  user-color={color}
  user-picture={picture}
  user-status={status}
  room-id={id}
  public-key={key}
  client:load
>
  <slot></slot>
</liveblocks-room>
